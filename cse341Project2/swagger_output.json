{
  "swagger": "2.0",
  "info": {
    "title": "CSE341Project2 Node.js",
    "description": "Node.js Project 2 assignment for CSE341. This project is a REST API for a medication inventory system. It allows the user to add, update, and delete medications from the database. It also allows the user to log medication usage. The user can also retrieve information about medications by name or by date.\n The apiKey is 5db70934345e409f96cb070e9495asdkjh54s534s2asd35as15a840ffa",
    "version": "1.0.0"
  },
  "host": "cse341project2-00el.onrender.com",
  "basePath": "/",
  "schemes": ["https"],
  "securityDefinitions": {
    "apiKey": {
      "type": "apiKey",
      "name": "z-key",
      "in": "header"
    }
  },
  "security": [
    {
      "apiKey": []
    }
  ],
  "paths": {
    "/meds/": {
      "get": {
        "description": "Retrieve all medications from the database. This will not retrieve medication usage logs for the medications.",
        "responses": {
          "200": {
            "description": "OK"
          },
          "404": {
            "description": "Not Found"
          },
          "500": {
            "description": "Internal Server Error"
          }
        }
      },
      "post": {
        "description": "Add a new medication to the database. All feilds are required.",
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "schema": {
              "type": "object",
              "properties": {
                "medName": {
                  "example": "any"
                },
                "medStrength": {
                  "example": "10mg"
                },
                "medUnit": {
                  "example": "tablet, capsule, etc."
                },
                "medClass": {
                  "example": "2,3,4, or 5"
                },
                "medInventory": {
                  "example": "any number"
                },
                "medThreshold": {
                  "example": "any number"
                }
              }
            }
          }
        ],
        "responses": {
          "201": {
            "description": "Created"
          },
          "400": {
            "description": "Bad Request"
          },
          "500": {
            "description": "Internal Server Error"
          }
        }
      }
    },

    "/meds/{id}": {
      "get": {
        "description": "Retrieve information for a single medication by ID. This will not retrieve medication usage logs for the medication.",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "type": "string"
          }
        ],
        "responses": {
          "400": {
            "description": "Bad Request"
          }
        }
      },
      "put": {
        "description": "Update information for a single medication by ID. All fields are required.",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "type": "string"
          },
          {
            "name": "body",
            "in": "body",
            "schema": {
              "type": "object",
              "properties": {
                "medName": {
                  "example": "any"
                },
                "medStrength": {
                  "example": "10mg"
                },
                "medUnit": {
                  "example": "tablet, capsule, etc."
                },
                "medClass": {
                  "example": "2,3,4, or 5"
                },
                "medInventory": {
                  "example": "any number"
                },
                "medThreshold": {
                  "example": "any number"
                }
              }
            }
          }
        ],
        "responses": {
          "200": {
            "description": "OK"
          },
          "400": {
            "description": "Bad Request"
          },
          "404": {
            "description": "Not Found"
          },
          "500": {
            "description": "Internal Server Error"
          }
        }
      },
      "delete": {
        "description": "Delete a medication by ID. This will not delete medication usage logs for the medication.",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "type": "string"
          }
        ],
        "responses": {
          "201": {
            "description": "Created"
          },
          "400": {
            "description": "Bad Request"
          },
          "404": {
            "description": "Not Found"
          },
          "500": {
            "description": "Internal Server Error"
          }
        }
      }
    },

      "/meds/name/{name}": {
        "get": {
          "description": "Retrieve medication information by name for all meds matching the search. This will allow the user to search for a medication by partial or full spelling of the name.",
          "parameters": [
            {
              "name": "name",
              "in": "path",
              "required": true,
              "type": "string"
            }
          ],
          "responses": {
            "200": {
              "description": "Successful"
            },
            "400": {
              "description": "Bad Request"
            },
            "404": {
              "description": "Not Found"
            },
            "500": {
              "description": "Internal Server Error"
            }
          }
        }
      },  

      "/meds/usage/{id}": {
      "post": {
        "description": "Log medication usage using the medication's ID. This will also update the medication's inventory.",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "type": "string"
          },
          {
            "name": "body",
            "in": "body",
            "schema": {
              "type": "object",
              "properties": {
                "medUnitsUsed": {
                  "example": "any number"
                },
                "medUsedDate": {
                  "example": "any date"
                }
              }
            }
          }
        ],
        "responses": {
          "201": {
            "description": "Created"
          },
          "400": {
            "description": "Bad Request"
          },
          "404": {
            "description": "Not Found"
          },
          "500": {
            "description": "Internal Server Error"
          }
        }
      }
    },

    "/meds/usage/{date}": {
      "get": {
        "description": "Retrieve medication usage information for all medications filled on a specific date.",
        "parameters": [
          {
            "name": "date",
            "in": "path",
            "required": true,
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "OK"
          },
          "400": {
            "description": "Bad Request"
          },
          "500": {
            "description": "Internal Server Error"
          }
        }
      }
    },

    "/meds/usageById/{id}": {
      "get": {
        "description": "Retrieve medication usage information for a specific medication by ID. This will retrieve all usage logs for the medication.",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "OK"
          },
          "400": {
            "description": "Bad Request"
          },
          "500": {
            "description": "Internal Server Error"
          }
        }
      }
    }
  }
}
